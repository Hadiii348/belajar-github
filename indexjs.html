<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fitur JavaScript Terbaru</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        h1, h2 {
            color: #0056b3;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        button:hover {
            background-color: #0056b3;
        }
        pre {
            background-color: #e9e9e9;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background-color: #e2f0cb;
            border-left: 5px solid #8bc34a;
            border-radius: 5px;
        }
        .warning {
            color: orange;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <h1>Demonstrasi Fitur JavaScript Terbaru</h1>

    <div class="container">
        <h2>JavaScript 2025 Features</h2>
        <h3>RegExp.escape() Method</h3>
        <p>Mengamankan string untuk digunakan dalam ekspresi reguler.</p>
        <button onclick="runRegExpEscape()">Jalankan RegExp.escape()</button>
        <div id="regExpEscapeResult" class="result"></div>

        <h3>Float16Array</h3>
        <p>Array untuk angka floating-point 16-bit.</p>
        <button onclick="createFloat16Array()">Buat Float16Array</button>
        <div id="float16ArrayResult" class="result"></div>

        <h3>Math.f16round()</h3>
        <p>Membulatkan angka ke representasi floating-point 16-bit terdekat.</p>
        <button onclick="runMathF16Round()">Jalankan Math.f16round()</button>
        <div id="mathF16RoundResult" class="result"></div>

        <h3>Set Methods (union, intersection, difference, symmetricDifference, isSubsetOf, isSupersetOf, isDisjointFrom)</h3>
        <p>Operasi set baru untuk objek Set.</p>
        <button onclick="runSetOperations()">Jalankan Operasi Set</button>
        <div id="setOperationsResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2023 Features</h2>
        <h3>Array toReversed(), toSorted(), toSpliced(), with()</h3>
        <p>Metode array non-mutating.</p>
        <button onclick="runArrayNonMutatingMethods()">Jalankan Metode Array Non-Mutating</button>
        <div id="arrayNonMutatingResult" class="result"></div>

        <h3>Array findLast(), findLastIndex()</h3>
        <p>Mencari elemen dari akhir array.</p>
        <button onclick="runArrayFindLastMethods()">Jalankan findLast() & findLastIndex()</button>
        <div id="arrayFindLastResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2020 Features</h2>
        <h3>BigInt</h3>
        <p>Mendukung bilangan bulat yang sangat besar.</p>
        <button onclick="runBigIntExample()">Jalankan BigInt</button>
        <div id="bigIntResult" class="result"></div>

        <h3>Nullish Coalescing Operator (??)</h3>
        <p>Mengembalikan argumen pertama jika bukan nullish (null atau undefined).</p>
        <button onclick="runNullishCoalescing()">Jalankan Nullish Coalescing</button>
        <div id="nullishCoalescingResult" class="result"></div>

        <h3>Optional Chaining Operator (?.)</h3>
        <p>Mengakses properti objek yang mungkin null atau undefined tanpa error.</p>
        <button onclick="runOptionalChaining()">Jalankan Optional Chaining</button>
        <div id="optionalChainingResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2019 Features</h2>
        <h3>String.trimStart(), String.trimEnd()</h3>
        <p>Menghapus spasi dari awal atau akhir string.</p>
        <button onclick="runTrimMethods()">Jalankan trimStart() & trimEnd()</button>
        <div id="trimMethodsResult" class="result"></div>

        <h3>Object.fromEntries()</h3>
        <p>Membuat objek dari pasangan kunci/nilai yang dapat diulang.</p>
        <button onclick="runFromEntries()">Jalankan Object.fromEntries()</button>
        <div id="fromEntriesResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2018 Features</h2>
        <h3>Promise.finally()</h3>
        <p>Menjalankan callback setelah Promise selesai, baik berhasil atau gagal.</p>
        <button onclick="runPromiseFinally()">Jalankan Promise.finally()</button>
        <div id="promiseFinallyResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2017 Features</h2>
        <h3>Object.entries(), Object.values()</h3>
        <p>Mengembalikan pasangan kunci/nilai atau nilai dari objek.</p>
        <button onclick="runObjectEntriesValues()">Jalankan Object.entries() & values()</button>
        <div id="objectEntriesValuesResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2016 Features</h2>
        <h3>Exponentiation Operator (**)</h3>
        <p>Operator pangkat.</p>
        <button onclick="runExponentiation()">Jalankan Operator Pangkat</button>
        <div id="exponentiationResult" class="result"></div>

        <h3>Array.includes()</h3>
        <p>Memeriksa apakah array berisi elemen tertentu.</p>
        <button onclick="runArrayIncludes()">Jalankan Array.includes()</button>
        <div id="arrayIncludesResult" class="result"></div>
    </div>

    <div class="container">
        <h2>JavaScript 2015 (ES6) Features</h2>
        <h3>Arrow Functions</h3>
        <p>Sintaks fungsi yang lebih pendek.</p>
        <button onclick="runArrowFunction()">Jalankan Arrow Function</button>
        <div id="arrowFunctionResult" class="result"></div>

        <h3>let and const</h3>
        <p>Deklarasi variabel dengan scope blok.</p>
        <button onclick="runLetConst()">Jalankan let dan const</button>
        <div id="letConstResult" class="result"></div>

        <h3>Classes</h3>
        <p>Sintaks berbasis kelas untuk pewarisan objek.</p>
        <button onclick="runClassExample()">Jalankan Class</button>
        <div id="classExampleResult" class="result"></div>

        <h3>Promises</h3>
        <p>Menangani operasi asinkron.</p>
        <button onclick="runPromiseExample()">Jalankan Promise</button>
        <div id="promiseExampleResult" class="result"></div>
    </div>

    <div class="container">
        <h2>AJAX Examples</h2>
        <h3>AJAX PHP Example (Simulasi)</h3>
        <p>Simulasi permintaan AJAX ke server PHP.</p>
        <input type="text" id="firstNameInput" onkeyup="showHint(this.value)" placeholder="Ketik nama depan">
        <p>Saran: <span id="txtHint"></span></p>
        <div id="ajaxPhpResult" class="result"></div>

        <h3>AJAX XML Example (Simulasi)</h3>
        <p>Simulasi permintaan AJAX untuk data XML.</p>
        <button onclick="loadXMLDoc()">Dapatkan Info CD</button>
        <div id="xmlData" class="result"></div>
    </div>

    <p class="warning">
        <strong>Peringatan:</strong> Beberapa fitur JavaScript terbaru mungkin belum sepenuhnya didukung oleh semua browser lama.
        Untuk contoh AJAX, ini adalah simulasi karena tidak ada server backend yang sebenarnya.
    </p>

    <script type="module">
        // Import Attributes (ES2025) - Contoh sintaks, tidak dapat dijalankan langsung tanpa modul nyata
        // import config from "config.json" with {type:"json"};
        // console.log("Import Attributes (ES2025) - Contoh sintaks:", config);

        // Fungsi untuk menampilkan hasil
        function displayResult(elementId, message) {
            document.getElementById(elementId).innerHTML = message;
        }

        // JavaScript 2025 Features
        window.runRegExpEscape = function() {
            try {
                const safe = RegExp.escape("[*]");
                const regex = new RegExp(safe);
                const oldText = "[*] is a web school.";
                const newText = oldText.replace(regex, "W3Schools"); // Menggunakan replace karena match() tidak mengubah string
                displayResult("regExpEscapeResult", `Original: "${oldText}"<br>Escaped: "${safe}"<br>New Text: "${newText}"`);
            } catch (e) {
                displayResult("regExpEscapeResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        window.createFloat16Array = function() {
            try {
                const myArr = new Float16Array([1.5, 2.5, 3.5, 4.5]);
                let bytes = myArr.BYTES_PER_ELEMENT;
                let length = myArr.length;
                displayResult("float16ArrayResult", `Float16Array: [${myArr.join(', ')}]<br>BYTES_PER_ELEMENT: ${bytes}<br>Length: ${length}`);
            } catch (e) {
                displayResult("float16ArrayResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        window.runMathF16Round = function() {
            try {
                let a = Math.f16round(2.60);
                let b = Math.f16round(2.50);
                let c = Math.f16round(2.49);
                displayResult("mathF16RoundResult", `Math.f16round(2.60): ${a}<br>Math.f16round(2.50): ${b}<br>Math.f16round(2.49): ${c}`);
            } catch (e) {
                displayResult("mathF16RoundResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        window.runSetOperations = function() {
            try {
                const A = new Set(['a', 'b', 'c']);
                const B = new Set(['b', 'c', 'd']);

                const C_union = A.union(B);
                const C_intersection = A.intersection(B);
                const C_difference = A.difference(B);
                const C_symmetricDifference = A.symmetricDifference(B);
                const isSubset = A.isSubsetOf(B);
                const isSuperset = A.isSupersetOf(B);
                const isDisjoint = A.isDisjointFrom(B);

                let resultHtml = `Set A: {${Array.from(A).join(', ')}}<br>`;
                resultHtml += `Set B: {${Array.from(B).join(', ')}}<br>`;
                resultHtml += `Union (A ∪ B): {${Array.from(C_union).join(', ')}}<br>`;
                resultHtml += `Intersection (A ∩ B): {${Array.from(C_intersection).join(', ')}}<br>`;
                resultHtml += `Difference (A \ B): {${Array.from(C_difference).join(', ')}}<br>`;
                resultHtml += `Symmetric Difference (A Δ B): {${Array.from(C_symmetricDifference).join(', ')}}<br>`;
                resultHtml += `A is subset of B: ${isSubset}<br>`;
                resultHtml += `A is superset of B: ${isSuperset}<br>`;
                resultHtml += `A is disjoint from B: ${isDisjoint}`;
                displayResult("setOperationsResult", resultHtml);
            } catch (e) {
                displayResult("setOperationsResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        // JavaScript 2023 Features
        window.runArrayNonMutatingMethods = function() {
            try {
                const months = ["Jan", "Feb", "Mar", "Apr"];
                const reversed = months.toReversed();
                const sorted = months.toSorted();
                const spliced = months.toSpliced(0, 1, "May"); // Menghapus 1 elemen dari index 0, menambahkan "May"
                const updated = months.with(2, "March"); // Mengganti elemen di index 2

                let resultHtml = `Original Array: [${months.join(', ')}]<br>`;
                resultHtml += `toReversed(): [${reversed.join(', ')}]<br>`;
                resultHtml += `toSorted(): [${sorted.join(', ')}]<br>`;
                resultHtml += `toSpliced(0, 1, "May"): [${spliced.join(', ')}]<br>`;
                resultHtml += `with(2, "March"): [${updated.join(', ')}]`;
                displayResult("arrayNonMutatingResult", resultHtml);
            } catch (e) {
                displayResult("arrayNonMutatingResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        window.runArrayFindLastMethods = function() {
            try {
                const temp = [27, 28, 30, 40, 42, 35, 30];
                let high = temp.findLast(x => x > 40);
                let pos = temp.findLastIndex(x => x > 40);
                displayResult("arrayFindLastResult", `Array: [${temp.join(', ')}]<br>findLast(x > 40): ${high}<br>findLastIndex(x > 40): ${pos}`);
            } catch (e) {
                displayResult("arrayFindLastResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        // JavaScript 2020 Features
        window.runBigIntExample = function() {
            try {
                let x = 9999999999999999n; // Menggunakan 'n' untuk BigInt
                let y = BigInt("1234567890123456789012345");
                let z = x * 2n; // Operasi BigInt
                displayResult("bigIntResult", `x: ${x} (typeof: ${typeof x})<br>y: ${y}<br>x * 2: ${z}`);
            } catch (e) {
                displayResult("bigIntResult", `Error: ${e.message} (Fitur ini mungkin belum didukung browser Anda)`);
            }
        };

        window.runNullishCoalescing = function() {
            let name = null;
            let text = "missing";
            let result1 = name ?? text;

            let age = 0; // 0 bukan nullish
            let defaultAge = 18;
            let result2 = age ?? defaultAge;

            displayResult("nullishCoalescingResult", `name ?? text (name=null): "${result1}"<br>age ?? defaultAge (age=0): "${result2}"`);
        };

        window.runOptionalChaining = function() {
            const car = {type:"Fiat", model:"500", color:"white"};
            let name = car?.name; // car.name tidak ada, akan undefined
            const owner = {
                address: {
                    street: "Main St"
                }
            };
            let city = owner?.address?.city; // owner.address.city tidak ada, akan undefined

            displayResult("optionalChainingResult", `car?.name: "${name}"<br>owner?.address?.city: "${city}"`);
        };

        // JavaScript 2019 Features
        window.runTrimMethods = function() {
            let text1 = "     Hello World!     ";
            let text2 = text1.trimStart();
            let text3 = text1.trimEnd();
            displayResult("trimMethodsResult", `Original: "${text1}"<br>trimStart(): "${text2}"<br>trimEnd(): "${text3}"`);
        };

        window.runFromEntries = function() {
            const fruitsArray = [
                ["apples", 300],
                ["pears", 900],
                ["bananas", 500]
            ];
            const myObj = Object.fromEntries(fruitsArray);
            displayResult("fromEntriesResult", `Array of entries: ${JSON.stringify(fruitsArray)}<br>Object.fromEntries(): ${JSON.stringify(myObj)}`);
        };

        // JavaScript 2018 Features
        window.runPromiseFinally = function() {
            let promiseFinallyResult = document.getElementById("promiseFinallyResult");
            promiseFinallyResult.innerHTML = "Memulai Promise...";
            const myPromise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    const success = Math.random() > 0.5;
                    if (success) {
                        resolve("Promise berhasil!");
                    } else {
                        reject("Promise gagal!");
                    }
                }, 2000);
            });

            myPromise
                .then(value => {
                    promiseFinallyResult.innerHTML += `<br>Then: ${value}`;
                })
                .catch(error => {
                    promiseFinallyResult.innerHTML += `<br>Catch: ${error}`;
                })
                .finally(() => {
                    promiseFinallyResult.innerHTML += "<br>Finally: Promise selesai, baik berhasil atau gagal.";
                });
        };

        // JavaScript 2017 Features
        window.runObjectEntriesValues = function() {
            const person = {
                firstName: "John",
                lastName: "Doe",
                age: 50,
                eyeColor: "blue"
            };
            const entries = Object.entries(person);
            const values = Object.values(person);
            displayResult("objectEntriesValuesResult", `Object: ${JSON.stringify(person)}<br>Object.entries(): ${JSON.stringify(entries)}<br>Object.values(): ${JSON.stringify(values)}`);
        };

        // JavaScript 2016 Features
        window.runExponentiation = function() {
            let x = 5;
            let z = x ** 3; // 5 pangkat 3
            displayResult("exponentiationResult", `x = 5, x ** 3 = ${z}`);
        };

        window.runArrayIncludes = function() {
            const fruits = ["Banana", "Orange", "Apple", "Mango"];
            let hasMango = fruits.includes("Mango");
            let hasGrape = fruits.includes("Grape");
            displayResult("arrayIncludesResult", `Array: [${fruits.join(', ')}]<br>includes("Mango"): ${hasMango}<br>includes("Grape"): ${hasGrape}`);
        };

        // JavaScript 2015 (ES6) Features
        window.runArrowFunction = function() {
            const multiply = (a, b) => a * b;
            const greet = name => `Hello, ${name}!`;
            displayResult("arrowFunctionResult", `multiply(5, 3): ${multiply(5, 3)}<br>greet("World"): ${greet("World")}`);
        };

        window.runLetConst = function() {
            let message = "Ini adalah let.";
            const PI = 3.14;
            try {
                // PI = 3.14159; // Ini akan menyebabkan error
                let blockScoped = "Saya di dalam blok.";
                if (true) {
                    let blockScoped = "Saya di dalam blok yang berbeda.";
                    message += `<br>Di dalam blok: ${blockScoped}`;
                }
                message += `<br>Di luar blok: ${blockScoped}`;
                displayResult("letConstResult", `PI: ${PI}<br>${message}`);
            } catch (e) {
                displayResult("letConstResult", `Error: ${e.message}`);
            }
        };

        window.runClassExample = function() {
            class Car {
                constructor(name, year) {
                    this.name = name;
                    this.year = year;
                }
                age() {
                    const date = new Date();
                    return date.getFullYear() - this.year;
                }
            }
            const myCar = new Car("Ford", 2014);
            displayResult("classExampleResult", `Nama mobil: ${myCar.name}<br>Umur mobil: ${myCar.age()} tahun`);
        };

        window.runPromiseExample = function() {
            let promiseExampleResult = document.getElementById("promiseExampleResult");
            promiseExampleResult.innerHTML = "Memulai Promise...";
            const myPromise = new Promise((resolve, reject) => {
                setTimeout(() => {
                    resolve("Data berhasil diambil!");
                }, 1500);
            });

            myPromise.then(data => {
                promiseExampleResult.innerHTML += `<br>${data}`;
            }).catch(error => {
                promiseExampleResult.innerHTML += `<br>Error: ${error}`;
            });
        };

        // AJAX Examples (Simulasi karena tidak ada server backend)
        window.showHint = function(str) {
            const txtHint = document.getElementById("txtHint");
            if (str.length === 0) {
                txtHint.innerHTML = "";
                return;
            } else {
                // Simulasi respons server
                const names = ["Anna", "Brittany", "Cinderella", "Diana", "Eva", "Fiona", "Gunda", "Hege", "Inga", "Johanna", "Kitty", "Linda", "Nina", "Ophelia", "Petunia", "Amanda", "Raquel", "Cindy", "Doris", "Eve", "Evita", "Sunniva", "Tove", "Unni", "Violet", "Liza", "Elizabeth", "Ellen", "Wenche", "Vicky"];
                let hint = "";
                const q = str.toLowerCase();
                for (const name of names) {
                    if (name.toLowerCase().startsWith(q)) {
                        if (hint === "") {
                            hint = name;
                        } else {
                            hint += ", " + name;
                        }
                    }
                }
                txtHint.innerHTML = hint === "" ? "no suggestion" : hint;
            }
        };

        window.loadXMLDoc = function() {
            const xmlDataElement = document.getElementById("xmlData");
            xmlDataElement.innerHTML = "Memuat data XML (simulasi)...";

            // Simulasi data XML
            const simulatedXml = `
                <CATALOG>
                    <CD>
                        <TITLE>Empire Burlesque</TITLE>
                        <ARTIST>Bob Dylan</ARTIST>
                        <COUNTRY>USA</COUNTRY>
                        <COMPANY>Columbia</COMPANY>
                        <PRICE>10.90</PRICE>
                        <YEAR>1985</YEAR>
                    </CD>
                    <CD>
                        <TITLE>Hide your heart</TITLE>
                        <ARTIST>Bonnie Tyler</ARTIST>
                        <COUNTRY>UK</COUNTRY>
                        <COMPANY>CBS Records</COMPANY>
                        <PRICE>9.90</PRICE>
                        <YEAR>1988</YEAR>
                    </CD>
                </CATALOG>
            `;

            // Menggunakan DOMParser untuk mensimulasikan parsing XML
            const parser = new DOMParser();
            const xmlDoc = parser.parseFromString(simulatedXml, "text/xml");

            const cds = xmlDoc.getElementsByTagName("CD");
            let table = "<table><tr><th>Artist</th><th>Title</th><th>Year</th></tr>";
            for (let i = 0; i < cds.length; i++) {
                table += "<tr><td>" +
                    cds[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
                    "</td><td>" +
                    cds[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
                    "</td><td>" +
                    cds[i].getElementsByTagName("YEAR")[0].childNodes[0].nodeValue +
                    "</td></tr>";
            }
            table += "</table>";
            xmlDataElement.innerHTML = table;
        };

    </script>
</body>
</html>
